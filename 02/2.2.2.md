### 2.2.2 階層構造

リスト内にリストがある階層構造。  
この例だとpair内のpairで二分木ですね。
```scheme
(cons (list 1 2) (list 3 4))
```

count-leaves
```
(define (length items)
  (if (null? items)
      0
      (+ 1 (length (cdr items)))))

(define (count-leaves items)
  (cond ((null? items) 0)
        ((not (pair? items)) 1)
        (else (+ (count-leaves (car items))
                 (count-leaves (cdr items))))))

(define x (cons (list 1 2) (list 3 4)))
(length x)
; => 3
(count-leaves x)
; => 4

(list x x)
; => (((1 2) 3 4) ((1 2) 3 4))
(length (list x x))
; => 2
(count-leaves (list x x))
; => 8
```

#### ex 2.24
![box and pointer diagram](https://raw.github.com/hito-asa/sicp/master/02/ex2.24.png)

#### ex 2.25

```scheme
(define x (list 1 3 (list 5 7) 9))
(car (cdr (car (cdr (cdr x)))))
; => 7

(define x (list (list 7)))
(car (car x))
; => 7

(define x (list 1 (list 2 (list 3 (list 4 (list 5 (list 6 7)))))))
(car (cdr (car (cdr (car (cdr (car (cdr (car (cdr (car (cdr x))))))))))))
; => 7
```

#### ex 2.26


#### ex 2.27


#### ex 2.28


#### ex 2.29


#### ex 2.30

```scheme
(define (square-tree tree)
  (map (lambda (subtree)
         (if (pair? subtree)
             (square-tree subtree)
             (* subtree subtree)))
       tree))

(square-tree (list (list 1 2) (list 3 (list 4 5))))
; => ((1 4) (9 (16 25)))

(define (square-tree tree)
  (cond ((null? tree) ())
        ((not (pair? tree)) (* tree tree))
        (else (cons (square-tree (car tree))
                    (square-tree (cdr tree))))))

(square-tree (list (list 1 2) (list 3 (list 4 5))))
; => ((1 4) (9 (16 25)))
```

#### ex 2.31

```scheme
(define (tree-map proc tree)
  (cond ((null? tree) ())
        ((not (pair? tree)) (proc tree))
        (else (cons (square-tree (car tree))
                    (square-tree (cdr tree))))))

(tree-map (lambda (x) (* x x)) (list (list 1 2) (list 3 (list 4 5))))
; => ((1 4) (9 (16 25)))
```


